<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <title>Chat Test</title>
</head>
<body>
    <input type="text" id="messageInput" placeholder="メッセージを入力">
    <button onclick="sendMessage()">送信</button>

    <script>
        const websocket = new WebSocket('ws://' + window.location.host.replace(':8000', ':8001') + '/ws/chat/test/');

        websocket.onopen = function() {
            alert('WebSocket接続成功');
        };

        websocket.onmessage = function(event) {
            console.log('メッセージ受信:', event.data);
        };

        function sendMessage() {
            const messageContent = document.getElementById('messageInput').value;
            const message = {
                type: 'chat',
                content: messageContent,
            };
            console.log("送信するメッセージ:", message);
            websocket.send(JSON.stringify(message));
        }
    </script>
</body>
</html>